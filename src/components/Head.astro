---
import site from "../data/site.json";

interface Props {
  article?:
    | {
        author: {
          name: string;
          twitter?:
            | {
                username: string;
              }
            | undefined;
        };
        updatedTime: Date;
        publishedTime: Date;
        section: string;
        tags: string[];
        video?: string | undefined;
      }
    | undefined;
  canonicalUrl: URL;
  description: string;
  image?:
    | {
        alt: string;
        src: string;
      }
    | undefined;
  title: string;
  type?: string | undefined;
}
const { article, description, title, image, type, canonicalUrl } = Astro.props;
const imageContent = image ? image.src : site.logo;
const imageAlt = image ? image.alt : `"Logo of "${site.name}`;
---

<head>
  <link rel="canonical" href={canonicalUrl} />
  <meta charset="utf-8" />
  <meta name="description" content={description} />
  <meta name="generator" content={Astro.generator} />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  {
    article && (
      <Fragment>
        <meta property="article:author" content={article.author.name} />
        <meta
          property="article:modified_time"
          content={article.updatedTime.toISOString()}
        />
        <meta
          property="article:published_time"
          content={article.publishedTime.toISOString()}
        />
        <meta property="article:section" content={article.section} />
        {article.tags.map((tag) => (
          <meta property="article:tag" content={tag} />
        ))}
        {article.video && <meta property="og:video" content={article.video} />}
      </Fragment>
    )
  }
  <meta property="og:description" content={description} />
  <meta property="og:image:alt" content={imageAlt} />
  <!-- <meta property="og:image:height" content= /> -->
  <meta property="og:image:secure_url" content={imageContent} />
  <!-- <meta property="og:image:type" content=`"image/${}"` /> -->
  <meta property="og:image:url" content={imageContent} />
  <!-- <meta property="og:image:width" content= /> -->
  <meta property="og:image" content={imageContent} />
  <meta property="og:locale" content="en_ S" />
  <meta property="og:site_name" content={site.name} />
  <meta property="og:title" content={title} />
  <meta property="og:type" content={type ?? "website"} />
  <meta
    property="og:updated_time"
    content={article?.updatedTime.toISOString() ?? new Date().toISOString()}
  />
  <meta property="og:url" content={canonicalUrl} />
  <title>{title} | {site.name}</title>
  <meta property="twitter:card" content="summary_large_image" />
  <meta
    property="twitter:creator"
    content={article?.author.twitter?.username
      ? article.author.twitter.username
      : site.twitter.username}
  />
  <meta property="twitter:description" content={description} />
  <meta property="twitter:domain" content={site.domain} />
  <meta property="twitter:image:alt" content={imageAlt} />
  <meta property="twitter:image" content={imageContent} />
  <meta property="twitter:site" content={site.twitter.username} />
  <meta property="twitter:title" content={title} />
  <meta property="twitter:url" content={canonicalUrl} />
</head>
